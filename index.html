<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic Tac Toe</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: Arial, sans-serif;
        background: #000;
        color: #fff;
        min-height: 100vh;
        padding: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .game-container {
        width: 100%;
        max-width: 400px;
        margin: 0 auto;
    }

    h1 {
        text-align: center;
        font-size: 28px;
        margin: 10px 0 20px 0;
        color: #fff;
    }

    .status-box {
        background: #222;
        padding: 12px;
        margin-bottom: 15px;
        border: 1px solid #444;
        text-align: center;
    }

    .status-text {
        font-size: 14px;
        color: #aaa;
        margin-bottom: 5px;
    }

    .current-player {
        font-size: 24px;
        font-weight: bold;
        color: #4CAF50;
    }

    .players-row {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
    }

    .player-option {
        flex: 1;
        background: #222;
        padding: 10px;
        border: 1px solid #444;
    }

    .player-label {
        font-size: 12px;
        color: #aaa;
        margin-bottom: 5px;
        display: block;
    }

    select {
        width: 100%;
        padding: 8px;
        background: #333;
        color: #fff;
        border: 1px solid #555;
        font-size: 14px;
    }

    .buttons-row {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }

    button {
        flex: 1;
        padding: 12px;
        background: #333;
        color: #fff;
        border: 1px solid #555;
        font-size: 14px;
        cursor: pointer;
    }

    #resetBtn {
        background: #d32f2f;
        border-color: #d32f2f;
    }

    #newGameBtn {
        background: #2196F3;
        border-color: #2196F3;
    }

    .board-container {
        margin: 20px auto;
        width: 100%;
        max-width: 300px;
    }

    .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 4px;
        background: #111;
        padding: 8px;
    }

    .cell {
        aspect-ratio: 1;
        background: #222;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 36px;
        cursor: pointer;
        border: 1px solid #444;
        min-height: 80px;
    }

    .cell.taken {
        cursor: default;
    }

    .cell.win {
        background: #1b5e20;
        border-color: #2e7d32;
    }

    .cell.player1 {
        color: #4CAF50;
    }

    .cell.player2 {
        color: #2196F3;
    }

    .result-box {
        background: #222;
        padding: 15px;
        margin: 15px 0;
        border: 1px solid #444;
        text-align: center;
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        font-weight: bold;
    }

    .result-box.win {
        background: #1b5e20;
        color: #fff;
    }

    .result-box.draw {
        background: #ff9800;
        color: #000;
    }

    .score-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        margin-top: 20px;
        width: 100%;
    }

    .score-box {
        background: #222;
        padding: 12px;
        border: 1px solid #444;
        text-align: center;
    }

    .score-box.active {
        background: #2a2a2a;
        border-color: #4CAF50;
    }

    .score-label {
        font-size: 12px;
        color: #aaa;
        margin-bottom: 5px;
    }

    .score-value {
        font-size: 24px;
        font-weight: bold;
    }

    .score-value.player1 {
        color: #4CAF50;
    }

    .score-value.player2 {
        color: #2196F3;
    }

    .score-value.draw {
        color: #ff9800;
    }

    /* Mobile optimizations */
    @media (max-width: 400px) {
        body {
            padding: 5px;
        }
        
        h1 {
            font-size: 24px;
            margin: 5px 0 15px 0;
        }
        
        .players-row {
            flex-direction: column;
            gap: 8px;
        }
        
        .board-container {
            max-width: 280px;
        }
        
        .cell {
            min-height: 70px;
            font-size: 32px;
        }
        
        .buttons-row {
            flex-direction: column;
            gap: 8px;
        }
        
        .score-container {
            grid-template-columns: 1fr;
            gap: 8px;
        }
        
        .result-box {
            font-size: 18px;
            padding: 12px;
            min-height: 50px;
        }
    }

    @media (max-width: 320px) {
        .board-container {
            max-width: 240px;
        }
        
        .cell {
            min-height: 60px;
            font-size: 28px;
        }
    }
</style>
</head>
<body>

<div class="game-container">
    
    <div class="status-box">
        <div class="status-text">Current Turn:</div>
        <div class="current-player" id="currentTurn">X</div>
    </div>
    
    <div class="players-row">
        <div class="player-option">
            <span class="player-label">Player 1</span>
            <select id="player1Icon">
                <option value="X">X</option>
                <option value="O">O</option>
                <option value="üòé">üòé</option>
                <option value="‚≠ê">‚≠ê</option>
                <option value="‚ö°">‚ö°</option>
            </select>
        </div>
        
        <div class="player-option">
            <span class="player-label">Player 2</span>
            <select id="player2Icon">
                <option value="O">O</option>
                <option value="X">X</option>
                <option value="üòé">üòé</option>
                <option value="‚≠ê">‚≠ê</option>
                <option value="‚ö°">‚ö°</option>
            </select>
        </div>
    </div>
    
    <div class="buttons-row">
        <button id="resetBtn">Reset</button>
        <button id="newGameBtn">New Game</button>
    </div>
    
    <div class="board-container">
        <div class="board" id="board"></div>
    </div>
    
    <div class="result-box" id="resultBox"></div>
    
    <div class="score-container">
        <div class="score-box" id="scoreBox1">
            <div class="score-label">Player 1</div>
            <div class="score-value player1" id="score1">0</div>
        </div>
        
        <div class="score-box" id="scoreBoxDraw">
            <div class="score-label">Draws</div>
            <div class="score-value draw" id="scoreDraw">0</div>
        </div>
        
        <div class="score-box" id="scoreBox2">
            <div class="score-label">Player 2</div>
            <div class="score-value player2" id="score2">0</div>
        </div>
    </div>
</div>

<script>
const boardEl = document.getElementById('board');
const currentTurnEl = document.getElementById('currentTurn');
const resultBoxEl = document.getElementById('resultBox');
const player1Icon = document.getElementById('player1Icon');
const player2Icon = document.getElementById('player2Icon');
const score1El = document.getElementById('score1');
const score2El = document.getElementById('score2');
const scoreDrawEl = document.getElementById('scoreDraw');
const scoreBox1 = document.getElementById('scoreBox1');
const scoreBox2 = document.getElementById('scoreBox2');
const scoreBoxDraw = document.getElementById('scoreBoxDraw');
const resetBtn = document.getElementById('resetBtn');
const newGameBtn = document.getElementById('newGameBtn');

let board = Array(3).fill().map(() => Array(3).fill(''));
let currentPlayer = 'X';
let gameOver = false;
let winningCells = [];
let scores = { player1: 0, player2: 0, draws: 0 };

function createBoard() {
    boardEl.innerHTML = '';
    for(let i = 0; i < 3; i++) {
        for(let j = 0; j < 3; j++) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.dataset.row = i;
            cell.dataset.col = j;
            cell.addEventListener('click', handleClick);
            boardEl.appendChild(cell);
        }
    }
}

function handleClick(e) {
    if(gameOver) return;
    
    const row = e.target.dataset.row;
    const col = e.target.dataset.col;
    
    if(board[row][col] === '') {
        const icon = currentPlayer === 'X' ? player1Icon.value : player2Icon.value;
        board[row][col] = icon;
        e.target.textContent = icon;
        e.target.classList.add('taken', currentPlayer === 'X' ? 'player1' : 'player2');
        
        if(checkWin(icon)) {
            highlightWinningCells();
            showResult(`${icon} Wins!`, 'win');
            updateScores(currentPlayer === 'X' ? 'player1' : 'player2');
            highlightScoreBox(currentPlayer === 'X' ? 'player1' : 'player2');
            gameOver = true;
        } else if(isBoardFull()) {
            showResult("It's a Draw!", 'draw');
            updateScores('draws');
            highlightScoreBox('draws');
            gameOver = true;
        } else {
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            updateTurnDisplay();
        }
    }
}

function checkWin(icon) {
    // Rows
    for(let i = 0; i < 3; i++) {
        if(board[i].every(c => c === icon)) {
            winningCells = [[i,0], [i,1], [i,2]];
            return true;
        }
    }
    
    // Columns
    for(let j = 0; j < 3; j++) {
        if(board.every(r => r[j] === icon)) {
            winningCells = [[0,j], [1,j], [2,j]];
            return true;
        }
    }
    
    // Diagonals
    if([0,1,2].every(i => board[i][i] === icon)) {
        winningCells = [[0,0], [1,1], [2,2]];
        return true;
    }
    
    if([0,1,2].every(i => board[i][2-i] === icon)) {
        winningCells = [[0,2], [1,1], [2,0]];
        return true;
    }
    
    return false;
}

function highlightWinningCells() {
    winningCells.forEach(([row, col]) => {
        const cell = boardEl.querySelector(`[data-row="${row}"][data-col="${col}"]`);
        cell.classList.add('win');
    });
}

function showResult(message, type) {
    resultBoxEl.textContent = message;
    resultBoxEl.className = `result-box ${type}`;
    currentTurnEl.textContent = type === 'win' ? 'üéâ' : 'ü§ù';
}

function updateScores(winner) {
    scores[winner]++;
    updateAllScores();
    highlightScoreBox(winner);
}

function highlightScoreBox(winner) {
    scoreBox1.classList.remove('active');
    scoreBox2.classList.remove('active');
    scoreBoxDraw.classList.remove('active');
    
    if(winner === 'player1') {
        scoreBox1.classList.add('active');
    } else if(winner === 'player2') {
        scoreBox2.classList.add('active');
    } else {
        scoreBoxDraw.classList.add('active');
    }
}

function updateTurnDisplay() {
    const icon = currentPlayer === 'X' ? player1Icon.value : player2Icon.value;
    currentTurnEl.textContent = icon;
    currentTurnEl.style.color = currentPlayer === 'X' ? '#4CAF50' : '#2196F3';
}

function isBoardFull() {
    return board.flat().every(cell => cell !== '');
}

function resetGame() {
    board = Array(3).fill().map(() => Array(3).fill(''));
    createBoard();
    resultBoxEl.textContent = '';
    resultBoxEl.className = 'result-box';
    currentPlayer = 'X';
    gameOver = false;
    winningCells = [];
    updateTurnDisplay();
    
    scoreBox1.classList.remove('active');
    scoreBox2.classList.remove('active');
    scoreBoxDraw.classList.remove('active');
}

function newGame() {
    scores = { player1: 0, player2: 0, draws: 0 };
    resetGame();
    updateAllScores();
}

function updateAllScores() {
    score1El.textContent = scores.player1;
    score2El.textContent = scores.player2;
    scoreDrawEl.textContent = scores.draws;
}

player1Icon.addEventListener('change', () => {
    if(player1Icon.value === player2Icon.value) {
        player2Icon.value = player2Icon.value === 'X' ? 'O' : 'X';
    }
    if(!gameOver) updateTurnDisplay();
});

player2Icon.addEventListener('change', () => {
    if(player2Icon.value === player1Icon.value) {
        player1Icon.value = player1Icon.value === 'X' ? 'O' : 'X';
    }
    if(!gameOver) updateTurnDisplay();
});

resetBtn.addEventListener('click', resetGame);
newGameBtn.addEventListener('click', newGame);

createBoard();
updateTurnDisplay();
updateAllScores();
</script>
</body>
</html>
